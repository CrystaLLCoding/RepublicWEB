const sqlite3 = require('sqlite3').verbose();
const path = require('path');

const dbPath = path.join(__dirname, 'database.sqlite');
const db = new sqlite3.Database(dbPath);

// Сначала очистим таблицу отзывов
db.run('DELETE FROM reviews', (err) => {
    if (err) {
        console.error('Error clearing reviews:', err);
        return;
    }
    console.log('Cleared existing reviews');

    // Добавляем новые отзывы
    const reviews = [
        // Отзывы про Эльёра
        { author: 'Тимур Каримов', date: '15.12.2024', rating: 5, text: 'Эльёр - настоящий профессионал! Стригусь у него уже больше года. Всегда идеальная стрижка, внимание к деталям на высшем уровне. Рекомендую!', avatar: 'Т' },
        { author: 'Азиз Рахимов', date: '10.12.2024', rating: 5, text: 'Отличный мастер! Эльёр сделал именно ту стрижку, которую я хотел. Очень доволен результатом. Обязательно вернусь!', avatar: 'А' },

        // Отзывы про Жавохира
        { author: 'Шерзод Усманов', date: '08.12.2024', rating: 5, text: 'Жавохир - топ! Стрижка и бритьё на высшем уровне. Приятная атмосфера, комфортно и профессионально. Советую всем!', avatar: 'Ш' },
        { author: 'Фаррух Алиев', date: '05.12.2024', rating: 5, text: 'Ходил к Жавохиру по рекомендации друга. Не пожалел! Качественная работа, стильный результат. Теперь только к нему!', avatar: 'Ф' },

        // Отзывы про Рахматиллу
        { author: 'Бахтиёр Назаров', date: '03.12.2024', rating: 5, text: 'Рахматилла - мастер своего дела! Мужская стрижка и коррекция бороды выполнены безупречно. Очень доволен!', avatar: 'Б' },
        { author: 'Равшан Юсупов', date: '28.11.2024', rating: 5, text: 'Отличный барбер! Рахматилла знает своё дело. Стрижка получилась именно такой, как я хотел. Рекомендую!', avatar: 'Р' },

        // Отзывы про Фахриддина
        { author: 'Достон Мирзаев', date: '25.11.2024', rating: 5, text: 'Фахриддин - профессионал! Индивидуальный подход, стильные образы. Всегда выхожу довольным. Спасибо!', avatar: 'Д' },
        { author: 'Жасур Абдуллаев', date: '20.11.2024', rating: 5, text: 'Хожу к Фахриддину уже полгода. Всегда качественная работа, приятная атмосфера. Один из лучших барберов в городе!', avatar: 'Ж' },

        // Отзывы про Огабека
        { author: 'Санжар Турсунов', date: '18.11.2024', rating: 5, text: 'Огабек - молодец! Комфортная атмосфера, качественная стрижка. Всё чётко и стильно. Рекомендую!', avatar: 'С' },
        { author: 'Улугбек Хасанов', date: '15.11.2024', rating: 5, text: 'Отличный мастер! Огабек создаёт стильные образы. Стрижка и укладка на высоте. Буду ходить постоянно!', avatar: 'У' },

        // Отзывы про Анвара
        { author: 'Нодир Исмаилов', date: '12.11.2024', rating: 5, text: 'Анвар - топовый барбер! Классические и современные стрижки - всё на высшем уровне. Очень доволен!', avatar: 'Н' },
        { author: 'Акмал Садыков', date: '08.11.2024', rating: 5, text: 'Ходил к Анвару на стрижку и бритьё. Результат превзошёл ожидания! Профессионализм и внимание к деталям. Рекомендую!', avatar: 'А' }
    ];

    const stmt = db.prepare('INSERT INTO reviews (author, date, rating, text, avatar) VALUES (?, ?, ?, ?, ?)');

    reviews.forEach((review, index) => {
        stmt.run(review.author, review.date, review.rating, review.text, review.avatar, (err) => {
            if (err) {
                console.error(`Error inserting review ${index + 1}:`, err);
            } else {
                console.log(`✓ Added review from ${review.author}`);
            }
        });
    });

    stmt.finalize(() => {
        console.log('\n✅ All reviews added successfully!');
        db.close();
    });
});
